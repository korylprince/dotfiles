" vim: ft=vim

set nocompatible
filetype off

set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

Bundle 'gmarik/vundle'

Bundle 'saltstack/salt-vim'
Bundle 'ingydotnet/yaml-vim'
Bundle 'groenewege/vim-less'
Bundle 'hail2u/vim-css3-syntax'
Bundle 'ap/vim-css-color'
Bundle 'Glench/Vim-Jinja2-Syntax'
Bundle 'plasticboy/vim-markdown'
Bundle 'mattn/emmet-vim'
Bundle 'scrooloose/syntastic'
Bundle 'davidhalter/jedi-vim'
Bundle 'ervandew/supertab'
Bundle 'marijnh/tern_for_vim'
Bundle 'scrooloose/nerdtree'
Bundle 'majutsushi/tagbar'
Bundle 'kien/rainbow_parentheses.vim'
Bundle 'tpope/vim-surround'
Bundle 'xolox/vim-misc'
Bundle 'xolox/vim-easytags'
Bundle 'Blackrush/vim-gocode'

let g:vim_markdown_folding_disabled=1

"remove autocomplete preview
let g:SuperTabClosePreviewOnPopupClose = 1

"syntax check
let g:syntastic_enable_signs=1
set statusline=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*
let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 1

"skip html by default
let g:syntastic_mode_map = { 'mode': 'passive',
            \ 'active_filetypes': [],
            \ 'passive_filetypes': [] }

"don't freak about about angular attrs
let g:syntastic_html_tidy_ignore_errors=[" proprietary attribute \"ng-"]


"fix the rainbows
source ~/.vim/colors
au VimEnter * RainbowParenthesesToggle

"easytags
set tags+=~/.vimtags

function! ToggleSyntasticErrors()
    let old_last_winnr = winnr('$')
    SyntasticReset
    SyntasticToggleMode
    if old_last_winnr == winnr('$')
        " Nothing was closed, open syntastic error location panel
        SyntasticCheck
        SyntasticToggleMode
    endif
endfunction

"function mappings
nnoremap <F2> :NERDTreeToggle<cr>
nnoremap <F3> :TagbarToggle<cr>
nnoremap <F4> :RainbowParenthesesToggleAll<cr>
nnoremap <F5> :call ToggleSyntasticErrors()<cr>

filetype plugin indent on
